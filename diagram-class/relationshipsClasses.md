# Виды отношений

Давайте начнём рассматривать различные отношения между классами на диаграмме. Нами будут рассмотрены следующие соединительные линии:

* Отношение ассоциации (Association)
* Отношение зависимости (Dependency)
* Отношение наследования (Inheritance)
* Отношение реализации/имплементации (Realization/Implementation)
* Отношение агрегации (Aggregation)
* Отношение композиции (Composition)

Обозначение каждого вида отношения представлено на рисунке ниже. Далее мы начнём рассматривать каждое отношение в подробностях.

![](/assets/diagram-class/relationship.png)

## Отношение ассоциации(Association)

Отношение ассоциации используют, чтобы показать, что между классами (например, между двумя классами) существует некоторая связь. Обычно с помощью него на диаграмме классов показывают, что один класс пользуется функционалом другого класса.

![](/assets/diagram-class/relationAssosition.png)

В общем случае, использование отношения ассоциации выглядит следующим образом:

![](/assets/diagram-class/relationAssosition1.png)

Как вы можете заметить, стрелка ассоциации направлена от класса пользователя к классу владельцу используемой функциональности. Для пояснения того, каким образом один класс использует другой класс, вы можете описать данный процесс в вспомогательном тексте.
Обратите внимание на кратность ассоциации, которая расположена под стрелкой. С кратностью мы уже встречались ранее. Здесь у нее несколько иное значение. Кратность ассоциации обозначает количество объектов, которые участвуют во взаимодействии. Как показано на рисунке выше, во взаимодействии могут участвовать от m до n пользователей и от q до r владельцев.

![](/assets/diagram-class/multiplicityAssosition.png)

> Если кратность ассоциации не указана, будет подразумеваться кратность [0..*]. В случае со статическими классами кратность не указывается (можно считать, что там указана кратность [1]).

Избегайте использования отношения ассоциации в обе стороны, как это показано на рисунке ниже. Такое взаимодействие классов можно считать ярким примером спагетти-кода. В случае ошибки очень сложно будет обнаружить, что послужило ей причиной.

![](/assets/diagram-class/mistake.png)

> **Обозначение отношения ассоциации**. Строго говоря, отношение ассоциации изображают сплошной линией без стрелок. Например, на различных сайтах вы, скорее всего, могли видеть следующие примеры.

![](/assets/diagram-class/AssociationRelationNotation.png)
> В таких стандартных примерах очевидно, что студент учится у преподавателей и что работник работает на компанию, и никак иначе. Однако людям, которые только начинают знакомиться с вашей программой, необходимо понимать, в какую сторону направлена стрелка. Таким образом, возникает потребность в использовании именно направленного отношения ассоциации. В дальнейшем мы будем обозначать ассоциацию сплошной линией со стрелкой.

## Отношение зависимости(Dependency)

Отношение зависимости используют, чтобы показать, что изменение одного класса требует изменение другого класса.

В нашем случае вид графика функции зависит от самой функции или, по нашей договорённости об именовании, от объекта математического выражения. Давайте покажем это на диаграмме.

![](/assets/diagram-class/relationDependency.png)

> Стрелка отношения зависимости направлена от зависимого класса к независимому.

Объекты класса **Graph** зависят от изменений в объектах класса **MathExpression**, поскольку, на самом деле, в объекте **Graph** хранится указатель на объект класса **MathExpression**. Поэтому мы можем считать, что график «знает» обо всех изменениях внутри математического выражения (изменение тела функции, изменение границ значений переменной, изменение значения параметров и т.д.).
Отношение между этими двумя классами как бы соединяет две диаграммы воедино. Все классы нашей первой диаграммы «работают» на объекты класса **MathExpression**. Людям, работающим с графической частью приложения, нужно знать лишь об этом классе, что существенно снижает сложность. В результате наша вторая диаграмма приобретает следующий вид.

## Отношение наследования(Inheritance)

Прежде чем мы начнём изучать данное отношение, проясним один момент. Как вы можете видеть, данное отношение имеет два названия: отношение обобщения и отношение наследования. В терминах ООП принцип наследования является очень важной вещью. Чтобы не вносить путаницу в дальнейшее повествование, давайте договоримся использовать только второе название – отношение наследования – применительно к диаграмме классов.
Итак, отношение наследования используется, чтобы показать, что один класс является родителем (базовым классом или суперклассом) для другого класса (потомка, производного класса).

![](/assets/diagram-class/relationInheritance.png)

## Отношение реализации/имплементации (Realization/Implementation)

Обычно под отношением реализации подразумевается отношение интерфейсов и объектов реализующих этот интерфейс 
Например интерфейс Owner имеет методы для покупки и продажи частной сообственности, а отношение классов Person и Corporation будут обозначаться в виде пунктирной линии со стрелкой по направлению интерфейсов 

![](/assets/diagram-class/relationRealization.png)

## Отношение агрегации (Aggregation)

Отношение агрегации между двумя классами показывает, что один из них включает в себя другой класс в качестве составной части. При этом класс-часть **может и существовать обособленно** от класса-целого (далее мы раскроем смысл этой фразы).

![](/assets/diagram-class/relationAggregation.png)
 
> В переводе с английского, слово aggregation означает соединение частей. Это значение очень точно отражает суть данного отношения – показать, из каких частей состоит класс.

В целом, смысл этого отношения достаточно условен. Может показаться, что определение отношения агрегации «один класс включает в себя другой класс» означает примерно следующее:

```cpp
class A
{
	class B
	{
	};
…
}; 
```

На самом деле, это отношение означает, что объект одного класса включает в себя в качестве составной части объект другого класса.

![](/assets/diagram-class/relationAggregation1.png)

С отношением агрегации также можно использовать кратность, чтобы показать, сколько объектов одного класса входят в состав объекта другого класса.

## Отношение композиции (Composition)

Отношение композиции является частным случаем отношения агрегации. Однако у него есть одно отличие – классы-части, которые он соединяет с классом-целым, **не могут существовать обособленно**.

> Одним из переводов слова **composition** является слово **смесь**. Если допустить, что из смеси не получится получить исходные компоненты, то это хорошо помогает понять, что части, соединённые отношением композиции не могут существовать сами по себе.

Давайте в качестве примера рассмотрим окно интерпретатора Python.
Понятное дело, что ни полоса прокрутки (ScrollBar), ни заголовок окна (Title), ни поле ввода команд (TextInput) не могут существовать отдельно от окна программы (Window). Это можно изобразить на диаграмме классов.

![](/assets/diagram-class/relationComposition.png)
