# State

- [Понятие](#понятие)<br/>
- [Обозначение](#обозначение-на-диаграмме)<br/>
- [Пример использования](#примеры-использования)<br/>

Иногда в источниках могут интерпретироваться как:

- State
- Состояние

> В дальнейшем будет использоваться `состояние`.

## Понятие

**Состояние ( англ. state )** - также называется `простым состоянием` (англ. simple state), ситуация в жизненном цикле объекта, во время которой он удовлетворяет некоторому условию, выполняет определенную деятельность или ожидает какого-то события. Состояние объекта определяется значениями некоторых его атрибутов и присутствием или отсутствием связей с другими объектами.

## Обозначение на диаграмме

Состояние изображается прямоугольником с закругленными краями:

![](/assets/diagram-state/state.png)

> Состояние может содержать только имя или имя и дополнительно список внутренних действий. Список внутренних действий содержит перечень [действий или деятельностей](./action-and-activity.md), которые выполняются во время нахождения объекта в данном состоянии.

Помимо `простых состояний`, на диаграмме могут отображаться `составные состояния` (англ. composite state), состоящие из вложенных в них `подсостояний` (англ. substate).

![](/assets/diagram-state/composite-state.png)

Составное состояние, которое может использоваться в разных контекстах, в т.ч. и для разных диаграмм (автоматов), называются `подавтоматами` (англ. submachine state). Составное состояние может быть разбито на `зоны` (англ. regions), называемые также `параллельными подавтоматами` (англ. concurrent substates). Если на диаграмме имеется составное состояние с вложенными параллельными подавтоматами, то экземпляр сущности может одновременно находиться в нескольких подсостояниях, но не более чем по одному из каждого подавтомата. Если какой-либо из подавтоматов пришел в свое конечное состояние раньше других, то он должен ожидать, пока другие подавтоматы не придут в свои конечные состояния.

![](/assets/diagram-state/submachine-state-example.png)

> В некоторых случаях бывает желательно скрыть внутреннюю структуру составного состояния в целях улучшения восприятия диаграммы. В подобной ситуации в правом нижнем углу указывается специальный символ, означающий, что структуру состояния можно посмотреть на отдельной диаграмме.

![](/assets/diagram-state/shadow-state.png)

В UML также определено несколько `псевдосостояний` (англ. pseudostate), которые перечислены в следующей таблице.

## Примеры использования

| Наименование              |             Обозначение              | Назначение                                                                                                                                                                                                                              |
| ------------------------- | :----------------------------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Начальное (англ. initial) | ![](/assets/diagram-state/start.png) | Начальное состояние автомата, начальное подсостояние составного состояния или параллельного подавтомата. Из начального состояния могут только исходить переходы.                                                                        |
| Конечное (англ. final)    |  ![](/assets/diagram-state/end.png)  | Конечное состояние автомата, конечное подсостояние составного состояния или параллельного подавтомата. В конечное состояние могут только входить переходы. Примечание. В стандарте UML 2.5 считается состоянием, а не псевдосостоянием. |

![](../img/uml_state_08.png)

| Наименование                             |               Обозначение                | Назначение                                                                                                                                             |
| ---------------------------------------- | :--------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Немедленное завершение (англ. terminate) | ![](/assets/diagram-state/terminate.png) | Аналогично конечному состоянию, но подразумевает немедленное прекращение деятельности и уничтожение экземпляра сущности, для которой построен автомат. |
| Точка входа (англ. entry point)          |   ![](/assets/diagram-state/entry.png)   | Точка входа в автомат или составное состояние. Может быть несколько. Допускается крепление к границе составного состояния.                             |
| Точка выхода (англ. exit point)          |   ![](/assets/diagram-state/exit.png)    | Точка выхода из автомата или составного состояния. Может быть несколько. Допускается крепление к границе составного состояния.                         |

![](../img/uml_state_13.png)

| Наименование            |             Обозначение             | Назначение                                                                                                                                   |
| ----------------------- | :---------------------------------: | -------------------------------------------------------------------------------------------------------------------------------------------- |
| Ветвление (англ. fork)  | ![](/assets/diagram-state/fork.png) | Ветвление переходов в параллельные подавтоматы.                                                                                              |
| Соединение (англ. join) | ![](/assets/diagram-state/join.png) | Соединение переходов из параллельных подавтоматов. Выполняет функцию синхронизации выхода из параллельных подавтоматов составного состояния. |

![](../img/uml_state_16.png)

| Наименование                 |            Обозначение             | Назначение                                                                                                                                                             |
| ---------------------------- | :--------------------------------: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Перекресток (англ. junction) | ![](/assets/diagram-state/end.png) | Соединение и ветвление переходов для последовательных состояний. В случае ветвления для каждой исходящей из перехода ассоциации должно быть задано сторожевое условие. |

![](../img/uml_state_17.png)

| Наименование         |              Обозначение              | Назначение                                                                    |
| -------------------- | :-----------------------------------: | ----------------------------------------------------------------------------- |
| Выбор (англ. choice) | ![](/assets/diagram-state/choice.png) | Аналогично переходу, работающему на ветвление для последовательных состояний. |

![](../img/uml_state_19.png)

| Наименование                                       |                  Обозначение                   | Назначение                                                                                                                                                                                                                                                                                                                                                                                             |
| -------------------------------------------------- | :--------------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Поверхностное историческое (англ. shallow history) | ![](/assets/diagram-state/shallow-history.png) | Указывается внутри составного состояния и подразумевает запоминание текущей конфигурации составного состояния при выходе из него. Переход в историческое состояние восстанавливает запомненную конфигурацию составного состояния и продолжает работу составного состояния с того момента, когда его прервали в прошлый раз. Внутри составного состояния может быть только одно историческое состояние. |
| Глубинное историческое (англ. deep history)        |  ![](/assets/diagram-state/deep-history.png)   | Аналогично поверхностному историческому состоянию, но распространяется на все уровни вложенности подсостояний.                                                                                                                                                                                                                                                                                         |

## Пример использования

Простейший пример использования состояния в диаграмме состояний

![](/assets/diagram-state/diagram-example.png)

[<< Предыдущая страница ( автомат )](./state-machine.md)
[**|** Содержание **|**](./README.md)
[Следующая страница ( переход ) >>](./transition.md)
