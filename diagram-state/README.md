# Диаграмма состояний

### Содержание

- [Понятие](#понятие)
- [Базовые понятия](#базовые-понятия)
- [Общие свойства](#общие-свойства)
- [Содержимое](#содержимое)
- [Общее применение](#общее-применение)
- [Советы и подсказки](#советы-и-подсказки)
  - [Хорошо структурированная диаграмма состояний обладает следующими характеристиками](#хорошо-структурированная-диаграмма-состояний-обладает-следующими-характеристиками)
  - [Когда вы рисуете диаграмму состояний, пользуйтесь следующими рекомендациями](#когда-вы-рисуете-диаграмму-состояний-пользуйтесь-следующими-рекомендациями)

### Понятие

**Диаграмма состояний** – это один из пяти видов диаграмм, предназначенных для моделирования динамических аспектов поведения систем. Диаграмма состояний показывает конечный автомат. И диаграммы деятельности, и диаграммы состояний подходят для моделирования жизненного цикла объекта. Однако в то время, как диаграмма деятельности демонстрирует поток управления от одной деятельности к другой через множество объектов, диаграмма состояний отображает поток управления от состояния к состоянию внутри отдельного объекта.

Диаграммы состояния применяются для моделирования динамических аспектов поведения систем (в большинстве случаев это моделирование поведения реактивных объектов). Реактивным называется такой объект, поведение которого лучше всего характеризуется его реакцией на события, получаемые им извне его контекста. Реактивный объект имеет четкое время жизни, и его текущее поведение зависит от прошлого, Диаграммы состояний могут быть присоединены к классам, вариантам использования либо ко всей системе с целью визуализации, специфицирования, конструирования и документирования динамики отдельных объектов.

Диаграммы состояний полезны не только для моделирования динамических аспектов системы, но и для конструирования исполняемых систем посредством прямого и обратного проектирования.

## Базовые понятия

**Диаграмма состояний (англ. state diagram)** показывает автомат, сосредотачивая внимание на потоке управления от одного состояния к друтому. Изображается в виде графа с вершинами и дугами (ребрами).

**Автомат (англ. state machine)** — это описание последовательности состояний, через которые проходит объект на протяжении жизненого цикла, реагируя на события, а также описание реакции на эти события.

**Состояние (англ. state)** — ситуация в жизненном цикле объекта, на про-тяжении которой он удовлетворяет некоторому условию, выполняетекоторую деятельность или ожидает некоторого события.

**Событие (англ. event)** — спецификация существенного факта, который происходит во времени и пространстве. В контексте автомата событие — это воздействие, которое вызывает переход между состояниями.

**Переход (англ. transition)** — связь между двумя состояниями, показывающая, что объект, находящийся в первом состоянии, должен выполнить некоторые действия и перейти во второе, как только, произойдет определенное событие и будут выполнены определные условия.

**Деятельность (англ. activity)** специфицирует работу, происходящую внутри автомата.

**Действие (англ. action)** —примитивное выполняемое вычисление, приводящее к смене состояния модели или возврату значения.

> **`На заметку.`** Диаграммы состояний, используемые в УМЕ, основаны на нотации, предложенной Дэвидом Харелом (Бам@ Наге!). В частности, концепции вложенных и ортогональных состояний были подробно разработаны Харелом в виде формальной системы. В УМЬ эти концепции менее формализованны, чем в нотации Харела, и отличаются некоторыми деталями в частности, сосредотачивая внимание на объектно-ориентированных системах.

## Общие свойства

Диаграмма состояний обладает свойствами, общими для всех диаграмм: имеет имя и графическое содержимое, представляющее собой проекцию модели. От прочих диаграмм она отличается именно своим содержимым.

## Содержимое

Диаграммы состояния обычно содержат простые и составные состояния, а также переходы, события и действия. Кроме того, как и все диаграммы, могут включать комментарии и ограничения.

> **`На заметку.`** Диаграмма состояний, по сути, состоит из элементов, встречающихся в любом автомате. Она может содержать ветвления, разделения, соединения, состояния действий и состояния деятельности, объекты, начальные и конечные состояния, исторические состояния и т.д. в - общем, на диаграмме состояний отображаются все без исключения характеристики автомата.

## Общее применение

Диаграммы состояний применяются для моделирования динамических аспектов поведения системы. Имеется в виду обусловленное порядком возникновения событий поведение объектов любого рода в любом представлении системной архитектуры, включая классы (в т.ч. активные), интерфейсы, компоненты и узлы.

Диаграммы состояний можно использовать для моделирования некоторого динамического аспекта системы, притом в контексте почти любого элемента модели. Однако чаще их применяют в контексте всей системы, подсистемы либо класса. Также диаграммы состояний можно присоединять к вариантам использования (для моделирования сценариев).

При моделировании динамических аспектов системы, класса или варианта использования диаграммы состояний обычно применяются для моделирования реактивных объектов.

_Реактивный_ (reactive), или _управляемый событиями_, объект — такой, поведение которого лучше всего характеризуется его реакцией на события, принимаемые им извне его контекста. Обычно реактивный объект простаивает в ожидании события. Когда он получает это событие, его реакция обычно зависит от предыдущих событий. 'Отреагировав определенным образом, объект опять возвращается в состояние простоя, ожидая следующего события. Рассматривая объект подобного рода, вы сосредотачиваете внимание на его стабильных состояниях, событиях, инициирующих переходы от одного состояния к другому, а также действиях, которые выполняются при каждой смене состояния.

> **`На заметку.`** В отличие от диаграмм состояний, диаграммы действий применяются для моделирования потока. работ или моделирования операций. Диаграммы деятельности лучше подходят для моделирования потока деятельности во времени, как это представляется на блок-схемах.

## Советы и подсказки

Создавая диаграмму состояний в ИМТ, следует помнить, что она представляет собой всего лишь проекцию одной модели динаических аспектов системы. Отдельно взятая диаграмма состояний может охватить семантику одного реактивного объекта, но семантику непростой системы не в состоянии передать.

### Хорошо структурированная диаграмма состояний обладает следующими характеристиками:

- сосредоточена на передаче одного аспекта динамики системы;
- содержит только те элементы, которые существенны для понимания данного аспекта;
- детализирована адекватно своему уровню абстракции (раскрывает только те сущности, которые важны для понимания);
- применяет сбалансированное сочетание машин Мили и Мура.

### Когда вы рисуете диаграмму состояний, пользуйтесь следующими рекомендациями:

- присваивайте диаграмме имя, отражающее ее назначение;
- начинайте с моделирования стабильных состояний объекта, затем моделируйте допустимые переходы между состояниями. Показывайте ветвление, параллелизм и потоки объектов во вторую очередь — возможно, на отдельных диаграмма:
- располагайте элементы так, чтобы свести к минимуму пересечение линий;
- при создании объемных диаграмм состояний рассмотрите возможность применения расширенных средств — таких как вложенные автоматы, которые включены в полную спецификацию UML.
